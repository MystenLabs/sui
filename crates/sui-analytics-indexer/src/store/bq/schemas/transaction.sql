CREATE TABLE IF NOT EXISTS chaindata.TRANSACTION
(
    transaction_digest         STRING        NOT NULL,
    checkpoint                 INT64         NOT NULL,
    epoch                      INT64         NOT NULL,
    timestamp_ms               INT64         NOT NULL,
    sender                     STRING        NOT NULL,
    transaction_kind           STRING        NOT NULL,
    is_system_txn              BOOL          NOT NULL,
    is_sponsored_tx            BOOL          NOT NULL,
    transaction_count          INT64         NOT NULL,
    execution_success          BOOL          NOT NULL,
    input                      INT64         NOT NULL,
    shared_input               INT64         NOT NULL,
    gas_coins                  INT64         NOT NULL,
    created                    INT64         NOT NULL,
    mutated                    INT64         NOT NULL,
    deleted                    INT64         NOT NULL,
    transfers                  INT64         NOT NULL,
    split_coins                INT64         NOT NULL,
    merge_coins                INT64         NOT NULL,
    publish                    INT64         NOT NULL,
    upgrade                    INT64         NOT NULL,
    others                     INT64         NOT NULL,
    move_calls                 INT64         NOT NULL,
    packages                   STRING,
    gas_owner                  STRING        NOT NULL,
    gas_object_id              STRING        NOT NULL,
    gas_object_sequence        INT64         NOT NULL,
    gas_object_digest          STRING        NOT NULL,
    gas_budget                 NUMERIC(20, 0) NOT NULL,
    total_gas_cost             NUMERIC(20, 0) NOT NULL,
    computation_cost           NUMERIC(20, 0) NOT NULL,
    storage_cost               NUMERIC(20, 0) NOT NULL,
    storage_rebate             NUMERIC(20, 0) NOT NULL,
    non_refundable_storage_fee NUMERIC(20, 0) NOT NULL,
    gas_price                  NUMERIC(20, 0) NOT NULL,
    raw_transaction            STRING        NOT NULL,
    has_zklogin_sig            BOOL,
    has_upgraded_multisig      BOOL,
    transaction_json           JSON,
    effects_json               JSON
)
PARTITION BY RANGE_BUCKET(epoch, GENERATE_ARRAY(0, 100000, 10))
CLUSTER BY transaction_digest