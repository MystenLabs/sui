---
source: crates/sui/tests/shell_tests.rs
---
----- script -----
# Copyright (c) Mysten Labs, Inc.
# SPDX-License-Identifier: Apache-2.0

# This is just here as an example of a shell test that creates a git repo to work against

# use default git settings
export GIT_CONFIG_GLOBAL=""

# Set up git repo for `a`
git init -q -b main a
git -C a add .
git -C a -c user.email=test@test.com -c user.name=test commit -q -m "initial revision"

HASH=$(git -C a log --pretty=format:%H)

sui move --client.config "$CONFIG" cache-package testnet 4c78adac \
"{ git = \"file://$(pwd)/a\", rev = \"${HASH}\", subdir = \".\" }" 2>&1 \
| sed "s|$(pwd)|<ROOT>|g" | grep -v "output from \`git"

----- results -----
success: true
exit_code: 0
----- stdout -----
Downloading from file://<ROOT>/a
  â”‚ warning: filtering not recognized by server, ignoring
{"name":"a","chain_id":"4c78adac"}

----- stderr -----
