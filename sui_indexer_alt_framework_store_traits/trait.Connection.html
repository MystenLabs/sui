<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Represents a database connection that can be used by the indexer framework to manage watermark operations, agnostic of the underlying store implementation."><title>Connection in sui_indexer_alt_framework_store_traits - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="sui_indexer_alt_framework_store_traits" data-themes="" data-resource-suffix="" data-rustdoc-version="1.92.0 (ded5c06cf 2025-12-08)" data-channel="1.92.0" data-search-js="search-d69d8955.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Connection</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../sui_indexer_alt_framework_store_traits/index.html">sui_<wbr>indexer_<wbr>alt_<wbr>framework_<wbr>store_<wbr>traits</a><span class="version">1.68.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Connection</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.committer_watermark" title="committer_watermark">committer_watermark</a></li><li><a href="#tymethod.init_watermark" title="init_watermark">init_watermark</a></li><li><a href="#tymethod.pruner_watermark" title="pruner_watermark">pruner_watermark</a></li><li><a href="#tymethod.reader_watermark" title="reader_watermark">reader_watermark</a></li><li><a href="#tymethod.set_committer_watermark" title="set_committer_watermark">set_committer_watermark</a></li><li><a href="#tymethod.set_pruner_watermark" title="set_pruner_watermark">set_pruner_watermark</a></li><li><a href="#tymethod.set_reader_watermark" title="set_reader_watermark">set_reader_watermark</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate sui_<wbr>indexer_<wbr>alt_<wbr>framework_<wbr>store_<wbr>traits</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="index.html">sui_indexer_alt_framework_store_traits</a></div><h1>Trait <span class="trait">Connection</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/sui_indexer_alt_framework_store_traits/lib.rs.html#15-87">Source</a> </span></div><pre class="rust item-decl"><code>pub trait Connection: <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> {
    // Required methods
    fn <a href="#tymethod.init_watermark" class="fn">init_watermark</a>&lt;'life0, 'life1, 'async_trait&gt;(
        &amp;'life0 mut self,
        pipeline_task: &amp;'life1 <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.str.html">str</a>,
        default_next_checkpoint: <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.u64.html">u64</a>,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.92.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.85/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.92.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.u64.html">u64</a>&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait,
             'life1: 'async_trait</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.committer_watermark" class="fn">committer_watermark</a>&lt;'life0, 'life1, 'async_trait&gt;(
        &amp;'life0 mut self,
        pipeline_task: &amp;'life1 <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.str.html">str</a>,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.92.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.85/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.92.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.CommitterWatermark.html" title="struct sui_indexer_alt_framework_store_traits::CommitterWatermark">CommitterWatermark</a>&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait,
             'life1: 'async_trait</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.reader_watermark" class="fn">reader_watermark</a>&lt;'life0, 'async_trait&gt;(
        &amp;'life0 mut self,
        pipeline: &amp;'static <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.str.html">str</a>,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.92.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.85/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.92.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.ReaderWatermark.html" title="struct sui_indexer_alt_framework_store_traits::ReaderWatermark">ReaderWatermark</a>&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.pruner_watermark" class="fn">pruner_watermark</a>&lt;'life0, 'async_trait&gt;(
        &amp;'life0 mut self,
        pipeline: &amp;'static <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.str.html">str</a>,
        delay: <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/time/struct.Duration.html" title="struct core::time::Duration">Duration</a>,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.92.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.85/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.92.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.PrunerWatermark.html" title="struct sui_indexer_alt_framework_store_traits::PrunerWatermark">PrunerWatermark</a>&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.set_committer_watermark" class="fn">set_committer_watermark</a>&lt;'life0, 'life1, 'async_trait&gt;(
        &amp;'life0 mut self,
        pipeline_task: &amp;'life1 <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.str.html">str</a>,
        watermark: <a class="struct" href="struct.CommitterWatermark.html" title="struct sui_indexer_alt_framework_store_traits::CommitterWatermark">CommitterWatermark</a>,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.92.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.85/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.bool.html">bool</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait,
             'life1: 'async_trait</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.set_reader_watermark" class="fn">set_reader_watermark</a>&lt;'life0, 'async_trait&gt;(
        &amp;'life0 mut self,
        pipeline: &amp;'static <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.str.html">str</a>,
        reader_lo: <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.u64.html">u64</a>,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.92.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.85/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.bool.html">bool</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.set_pruner_watermark" class="fn">set_pruner_watermark</a>&lt;'life0, 'async_trait&gt;(
        &amp;'life0 mut self,
        pipeline: &amp;'static <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.str.html">str</a>,
        pruner_hi: <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.u64.html">u64</a>,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.92.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.85/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.bool.html">bool</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait</span>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Represents a database connection that can be used by the indexer framework to manage watermark
operations, agnostic of the underlying store implementation.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.init_watermark" class="method"><a class="src rightside" href="../src/sui_indexer_alt_framework_store_traits/lib.rs.html#18-22">Source</a><h4 class="code-header">fn <a href="#tymethod.init_watermark" class="fn">init_watermark</a>&lt;'life0, 'life1, 'async_trait&gt;(
    &amp;'life0 mut self,
    pipeline_task: &amp;'life1 <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.str.html">str</a>,
    default_next_checkpoint: <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.u64.html">u64</a>,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.92.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.85/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.92.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.u64.html">u64</a>&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,
    'life1: 'async_trait,</div></h4></section></summary><div class="docblock"><p>If no existing watermark record exists, initializes it with <code>default_next_checkpoint</code>.
Returns the committer watermark <code>checkpoint_hi_inclusive</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.committer_watermark" class="method"><a class="src rightside" href="../src/sui_indexer_alt_framework_store_traits/lib.rs.html#28-31">Source</a><h4 class="code-header">fn <a href="#tymethod.committer_watermark" class="fn">committer_watermark</a>&lt;'life0, 'life1, 'async_trait&gt;(
    &amp;'life0 mut self,
    pipeline_task: &amp;'life1 <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.str.html">str</a>,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.92.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.85/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.92.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.CommitterWatermark.html" title="struct sui_indexer_alt_framework_store_traits::CommitterWatermark">CommitterWatermark</a>&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,
    'life1: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Given a <code>pipeline_task</code> representing either a pipeline name or a pipeline with an associated
task (formatted as <code>{pipeline}{Store::DELIMITER}{task}</code>), return the committer watermark
from the <code>Store</code>. The indexer fetches this value for each pipeline added to determine which
checkpoint to resume processing from.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.reader_watermark" class="method"><a class="src rightside" href="../src/sui_indexer_alt_framework_store_traits/lib.rs.html#35-38">Source</a><h4 class="code-header">fn <a href="#tymethod.reader_watermark" class="fn">reader_watermark</a>&lt;'life0, 'async_trait&gt;(
    &amp;'life0 mut self,
    pipeline: &amp;'static <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.str.html">str</a>,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.92.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.85/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.92.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.ReaderWatermark.html" title="struct sui_indexer_alt_framework_store_traits::ReaderWatermark">ReaderWatermark</a>&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Given a pipeline, return the reader watermark from the database. This is used by the indexer
to determine the new <code>reader_lo</code> or inclusive lower bound of available data.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.pruner_watermark" class="method"><a class="src rightside" href="../src/sui_indexer_alt_framework_store_traits/lib.rs.html#46-50">Source</a><h4 class="code-header">fn <a href="#tymethod.pruner_watermark" class="fn">pruner_watermark</a>&lt;'life0, 'async_trait&gt;(
    &amp;'life0 mut self,
    pipeline: &amp;'static <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.str.html">str</a>,
    delay: <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/time/struct.Duration.html" title="struct core::time::Duration">Duration</a>,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.92.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.85/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.92.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.PrunerWatermark.html" title="struct sui_indexer_alt_framework_store_traits::PrunerWatermark">PrunerWatermark</a>&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Get the bounds for the region that the pruner is allowed to prune, and the time in
milliseconds the pruner must wait before it can begin pruning data for the given <code>pipeline</code>.
The pruner is allowed to prune the region between the returned <code>pruner_hi</code> (inclusive) and
<code>reader_lo</code> (exclusive) after waiting until <code>pruner_timestamp + delay</code> has passed. This
minimizes the possibility for the pruner to delete data still expected by inflight read
requests.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.set_committer_watermark" class="method"><a class="src rightside" href="../src/sui_indexer_alt_framework_store_traits/lib.rs.html#56-60">Source</a><h4 class="code-header">fn <a href="#tymethod.set_committer_watermark" class="fn">set_committer_watermark</a>&lt;'life0, 'life1, 'async_trait&gt;(
    &amp;'life0 mut self,
    pipeline_task: &amp;'life1 <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.str.html">str</a>,
    watermark: <a class="struct" href="struct.CommitterWatermark.html" title="struct sui_indexer_alt_framework_store_traits::CommitterWatermark">CommitterWatermark</a>,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.92.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.85/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.bool.html">bool</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,
    'life1: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Upsert the high watermark for the <code>pipeline_task</code> - representing either a pipeline name or a
pipeline with an associated task (formatted as <code>{pipeline}{Store::DELIMITER}{task}</code>) - as
long as it raises the watermark stored in the database. Returns a boolean indicating whether
the watermark was actually updated or not.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.set_reader_watermark" class="method"><a class="src rightside" href="../src/sui_indexer_alt_framework_store_traits/lib.rs.html#75-79">Source</a><h4 class="code-header">fn <a href="#tymethod.set_reader_watermark" class="fn">set_reader_watermark</a>&lt;'life0, 'async_trait&gt;(
    &amp;'life0 mut self,
    pipeline: &amp;'static <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.str.html">str</a>,
    reader_lo: <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.u64.html">u64</a>,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.92.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.85/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.bool.html">bool</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Update the <code>reader_lo</code> of an existing watermark entry only if it raises <code>reader_lo</code>. Readers
will reference this as the inclusive lower bound of available data for the corresponding
pipeline.</p>
<p>If an update is to be made, some timestamp (i.e <code>pruner_timestamp</code>) should also be set on
the watermark entry to the current time. Ideally, this would be from the perspective of the
store. If this is not possible, then it should come from some other common source of time
between the indexer and its readers. This timestamp is critical to the indexer’s operations,
as it determines when the pruner can safely begin pruning data. When <code>pruner_watermark</code> is
called by the indexer, it will retrieve this timestamp to determine how much longer to wait
before beginning to prune.</p>
<p>Returns a boolean indicating whether the watermark was actually updated or not.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.set_pruner_watermark" class="method"><a class="src rightside" href="../src/sui_indexer_alt_framework_store_traits/lib.rs.html#82-86">Source</a><h4 class="code-header">fn <a href="#tymethod.set_pruner_watermark" class="fn">set_pruner_watermark</a>&lt;'life0, 'async_trait&gt;(
    &amp;'life0 mut self,
    pipeline: &amp;'static <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.str.html">str</a>,
    pruner_hi: <a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.u64.html">u64</a>,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.92.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.92.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.85/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.92.0/std/primitive.bool.html">bool</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.92.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Update the pruner watermark, returns true if the watermark was actually updated.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../trait.impl/sui_indexer_alt_framework_store_traits/trait.Connection.js" async></script></section></div></main></body></html>